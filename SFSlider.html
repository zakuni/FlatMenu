<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>SFSlider</title> 
  </head> 
 
  <body>

    <form id="position"> 
      a <input type="text" value="" name="scrollA" />
      b <input type="text" value="" name="scrollB" />
    </form> 

    <form action="" method="" id="mouseposition"> 
      <ul> 
	<li>mousedownY: <input type="text" value="" name="mousedownY" /></li> 
	<li>mouseY: <input type="text" value="" name="onmouseY" /></li> 
	<li>scroll: <input type-"text" value="" name="scroll" /></li>
      </ul> 
    </form> 

    <iframe id="menu" src="menu.html" height="400" width=15% scrolling="no">
    </iframe>

    <iframe id="outline" src="outline.html" height="400" width=2% frameborder="0">
      iframe非対応
    </iframe>

    <iframe id="content" src="content.html" height="400"  width=80%>
      この部分は iframe 対応のブラウザで見てください。
    </iframe>



    <script>
      var click = 0;
      var scroll = 0;
      menu = window.frames[0];
      scrollbar = window.frames[1];
      content = window.frames[2];
      mode = 0;
      var row = "a", column = "a";

      function getMousePosition(e) {      // マウスカーソル位置
        var mouse = new Object();      
          if(e) {
            mouse.y = e.pageY;
          }
        else {
          mouse.y = event.y + document.body.scrollTop;
        }      
        return mouse;
      }

      
      function setPosition() {
        target = document.getElementById('position');
      
        target.scrollY.value    = getScrollPosition().y;
        target.scrollB.value    = getScrollPosition().b;
      
        setTimeout( function(){setPosition()},30 );
      }


      function setMouseDownPosition(){  // クリック位置(スクロールスタート位置)
        mouseposition = document.getElementById('mouseposition');
      
        frames[1].onmousedown = function(e){
          mouseposition.mousedownY.value = getMousePosition(e).y;
          click = getMousePosition(e).y;
        }
      }      
      setMouseDownPosition();


      function setScroll(){
        mouseposition = document.getElementById('mouseposition');
        frames[1].onmousemove = function(e){
          mouseposition.onmouseY.value = getMousePosition(e).y;
          mouseposition.scroll.value = getMousePosition(e).y - click;
          scroll = getMousePosition(e).y - click;
          if(-500 < scroll && scroll < 500){
	    mode = 0;
	  }
	  else if( (-1300 < scroll && scroll < -500) || (500 < scroll && scroll < 1300) ){
            mode = 1;
          }
          else if(scroll < -1300 || 1300 < scroll){
            mode = 2;
          }
        }
      }
      setScroll();
         

      function resetScroll(){
       frames[1].onmouseup = function(e){
          scroll = 0;
          console.log(scroll);
        }
        window.onmouseup = function(e){
          scroll = 0;
          console.log(scroll);
        }
      }
      resetScroll();

      function setPosition() {
        target = document.getElementById('position');
      
	target.scrollA.value    = getScrollPosition().a;
	target.scrollB.value    = getScrollPosition().b;
      
        setTimeout( function(){setPosition()}, 50);
      }
      

      function getScrollPosition() { // スクロールバーの位置を取得(フレーム外とフレーム内)
        var obj = new Object();
        var a = 0, i = 284, u = 559, e = 853, o = 1128, 
            ka = 1404,
            sa = 2429,
            ta = 2635,
            na = 2781,
            ha = 2910,
            ma = 3060,
            ya = 3206,
            ra = 3310,
            wa = 3436;

　　　　var aiueo = new Array(a, b, c, d, e);
	var akasatana = new Array(a, ka, sa, ta, na, ha, ma, ya, ra, wa);

	obj.a = frames[0].document.documentElement.scrollTop  || frames[0].document.body.scrollTop;
        obj.b = frames[1].document.documentElement.scrollTop  || frames[1].document.body.scrollTop;
	if(mode == 0){
          window.frames[0].scrollTo(0, obj.b);
	}
	else if(mode == 1){
          if(obj.b < i && column != "a"){                           // 「あ」
	    menu.location.replace("menu.html#a");
//	    column = "a";
	  }else if(i < obj.b && obj.b < u && column != "i"){        // 「い」
	    menu.location.replace("menu.html#i");
//	    column = "i";
          }else if(u < obj.b && obj.b < e && column != "u"){        // 「う」
	    menu.location.replace("menu.html#u");
//	    column = "u";
	  }else if(e < obj.b && obj.b < o && column != "e"){        // 「え」
	    menu.location.replace("menu.html#e");
//	    column = "e";
          }else if(o < obj && column != "o"){                       // 「お」
            menu.location.replace("menu.html#o");
//	    column = "o";
          }
        }
	else if(mode == 2){
          if(obj.b < ka && row != "a"){                          // 「あ」
	    menu.location.replace("menu.html#a");
//            row = "a";
	  }else if(ka < obj.b && obj.b < sa && row != "ka"){      // 「か」
	    menu.location.replace("menu.html#ka"); 
//	    row = "ka";
          }else if(sa < obj.b && obj.b < ta){    // 「さ」
	    menu.location.replace("menu.html#sa"); 
	  }else if(ta < obj.b && obj.b < na){    // 「た」
	    menu.location.replace("menu.html#ta"); 
          }else if(na < obj.b && obj.b < ha){    // 「な」
	    menu.location.replace("menu.html#na"); 
          }else if(ha < obj.b && obj.b < ma){    // 「は」
            menu.location.replace("menu.html#ha"); 
          }else if(ma < obj.b && obj.b < ya){    // 「ま」
            menu.location.replace("menu.html#ma"); 
          }else if(ya < obj.b && obj.b < ra){   // 「や」
            menu.location.replace("menu.html#ya"); 
          }else if(ra < obj.b && obj.b < wa){  // 「ら」
            menu.location.replace("menu.html#ra");
  	  }else if(wa < obj.b){                  // 「わ」
	    menu.location.replace("menu.html#wa"); 
	  }else if(obj.b % 10 == 0){
            content.scrollTo(0, obj.b);
          }
        }
        return obj;
      }
      
      setPosition();

    </script> 


  </body> 
</html> 
